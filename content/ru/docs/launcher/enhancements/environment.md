---
title : "Окружение"
lead: "Эта статья описывает принцип работы менеджера окружения в лаунчере"
weight: 4230
toc: true
---

## Где найти

1. Откройте настройки лаунчера
2. Перейдите во вкладку "Улучшения"
3. Откройте подвкладку "Окружение"

## Описание

Настройки окружения позволяют изменять команду запуска игры и указывать переменные окружения. Они могут быть полезны продвинутым пользователям, которые уверены в том, что они делают.

Переменные окружения и команда запуска игры имеют специальные "ключевые слова", которые будут заменены на иные значения перед запуском игры - к примеру, слово `%command%` будет заменено на команду запуска игры. Вы можете использовать их для создания более комплексных команд.

## Доступные ключевые слова

### Общие

Ключевые слова, доступные как в поле с командой запуска игры, так и в значениях переменных окружения.

| Ключевое слово | Значение | Пример |
| - | - | - |
| `%launcher%` | Путь до папки лаунчера, в которой хранятся его данные | `$HOME/.local/share/anime-game-launcher` |
| `%build%` | Путь до сборки Wine (в которой хранятся папки `bin`, `lib` и так далее) | `$HOME/.local/share/anime-game-launcher/runners/lutris-GE-Proton8-7-x86_64` |
| `%prefix%` | Путь до префикса Wine | `$HOME/.local/share/anime-game-launcher/prefix` |
| `%game%` | Путь до папки, в которую установлена игра | `$HOME/.local/share/anime-game-launcher/game` |
| `%temp%` | Путь до временной директории, используемой лаунчером | `$HOME/.local/share/anime-game-launcher` |

### Запуск игры

Ключевые слова, доступные только в поле с командой запуска игры.

| Ключевое слово | Значение | Пример |
| - | - | - |
| `%bash_command%` | Часть команды запуска игры, содержащая исполняемый файл Wine, а так же дополнительные утилиты типа `gamemoderun` | `gamemoderun 'HOME/.local/share/anime-game-launcher/runners/lutris-GE-Proton8-7-x86_64/bin/wine64'` |
| `%windows_command%` | Часть команды запуска игры, содержащая параметры Windows. В основном - путь до `.bat` файла, который осуществляет запуск игры, а также параметры `-window-mode exclusive` или `-screen-fullscreen 0 -popupwindow` если выбраны соответствующие настройки | `launcher.bat -window-mode exclusive` |
| `%command%` | Полная команда запуска игры | `%bash_command% %windows_command%` |

Конечная команда, которая осуществляет запуск игры, строится по образу `bash -c "%command%"`. Ее можно увидеть в файле `debug.log` - равно как и список переменных среды, использованных при запуске игры.

Для тестов команды запуска игры вы можете использовать встроенные утилиты Wine - к примеру, в качестве команды запуска указать `%bash_command% winecfg`. Таким образом можно быстро находить ошибки в команде и не ждать запуска самой игры.
